> ê°ì²´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ìƒì„±íŒŒê³  ì ì ˆíˆ íŒŒê´´í•˜ëŠ” ë²•ì„ ë°°ìš°ëŠ” ì¥ì˜ ë§ˆì§€ë§‰ ì•„ì´í…œì´ë‹¤. ì•ì„œ ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œë¡œ ìƒì„±ìë¥¼ ë§Œë“ ë‹¤ê±°ë‚˜, ìƒì„±ìë¥¼ ë¹Œë”ë¡œ ë§Œë“ ë‹¤ê±°ë‚˜, ì‹±ê¸€í„´ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë²•ì„ ë°°ì› ë‹¤. ì–¸ì œ ì–´ë– í•œ ë°©ë²•ìœ¼ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ê³  ì‚¬ìš©í•˜ëŠ”ê²Œ íš¨ìœ¨ì ì¸ì§€ ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ëŠ” ë°©ë²•ì„ ë°°ìš´ê²ƒì´ë‹¤. ë¶ˆí•„ìš”í•œ ê°ì²´ ìƒì„±ì„ í”¼í•˜ëŠ”ê²ƒ ë§Œí¼ ì¤‘ìš”í•œê²ƒì´ ì ì ˆíˆ íŒŒê´´í•˜ëŠ” ê²ƒì´ë‹¤. JVMì„ í†µí•´ ê°€ë¹„ì§€ ì»¬ë ‰í„°ê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê°ì²´ëŠ” ì•Œì•„ì„œ ì •ë¦¬í•˜ì§€ë§Œ ì´ GC ì†ì´ ë‹¿ì§€ ëª»í•˜ëŠ” ê³³ì— ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê·¸ ì§€ì ì„ ì°¾ì•„ì„œ ì ì ˆíˆ íŒŒê´´í•´ ì£¼ê³ , ê´œíˆ ì‚¬ìš©í•˜ì—¬ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ìë°”ì˜ ê¸°ëŠ¥ê¹Œì§€ ì•Œì•„ë³´ì. ë˜í•œ ì´ë¥¼ í•´ê²°í•  ë‹¤ì–‘í•œ ë°©ë²•ë„ ì°¾ì•„ë³´ì
> 

## ë”ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì°¸ì¡°ë¥¼ ì°¾ì•„ ì ì ˆíˆ íŒŒê´´í•˜ì.

- í”íˆ ë°œìƒí•˜ëŠ” ì¼€ì´ìŠ¤
    - ìŠ¤íƒì„ êµ¬í˜„í•œ ì¼€ì´ìŠ¤ì—ì„œ pop()ì„ í†µí•´ ê°ì²´ë¥¼ ì œê±° í•˜ë”ë˜ë„ ì œê±°ëœ ê°ì²´ì˜ ë‹¤ ì“´ ì°¸ì¡° ì£¼ì†Œê°€ ì—¬ì „íˆ ì¡´ì¬í•œë‹¤. ìŠ¤íƒì— ìŒ“ì˜€ë‹¤ê°€ ì¤„ì–´ë“¤ì—ˆì„ ë•Œ ìŠ¤íƒì—ì„œ êº¼ë‚´ì§„ ê°ì²´ë“¤ì˜ ì°¸ì¡°ëŠ” ë‚¨ì•„ìˆê²Œ ëœë‹¤. ì™œëƒí•˜ë©´ pop()ì€ ë°°ì—´ì˜ sizeë¥¼ ì¤„ì—¬ì„œ ì¤„ì¸ ì¸ë±ìŠ¤ì— ê°ì²´ë¥¼ ë°˜í™˜í•˜ê³  ìˆê¸° ë•Œë¬¸ì— size ë²”ìœ„ ë°–ì— ê°ì²´ë“¤ì€ ì ‘ê·¼í•˜ì§€ ëª»í•œ ìƒíƒœë¡œ ê·¸ëŒ€ë¡œ ì‚´ì•„ìˆê¸° ë•Œë¬¸ì´ë‹¤. ê°€ë¹„ì§€ ì»¬ë ‰í„°ëŠ” ê°ì²´ ì°¸ì¡°ê°€ ì‚´ì•„ ìˆìœ¼ë©´ ê·¸ ì•ˆì—ì„œ ì°¸ì¡°í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ê¹Œì§€ ì œê±°í•˜ì§€ëŠ” ëª»í•˜ê¸° ë•Œë¬¸ì— ì ì¬ì ìœ¼ë¡œ ë¬¸ì œê°€ ëœë‹¤.
        
        ```java
        // ê°€ì¥ ìµœê·¼ ìŒ“ì¸ ê°ì²´ ë°˜í™˜ (ì œê±°)
        public Object pop() {
            if(size == 0) {
                throw new EmptyStackException();
            }
            return elements[--size];
        }
        ```
        
- í•´ê²°ì±…
    - í•´ë‹¹ ê°ì²´ê°€ **ìê¸° ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ì˜ˆì™¸ì ì¸ ê²½ìš°ì¼ ë•ŒëŠ”** nullì²˜ë¦¬ í•´ì£¼ë©´ ëœë‹¤.
        
        ```java
        public Object pop_ê°œì„ () {
            if(size == 0) {
                throw new EmptyStackException();
            }
            Object object = elements[--size];
            elements[size] = null; // ì‚­ì œí•œ ê°ì²´ëŠ” ì§€ì›Œì£¼ê¸° 
            return object;
        }
        ```
        
        ```java
        // java.util.Stack ì˜ pop() ì¼ë¶€ 
        public synchronized E pop() {
              E       obj;
              int     len = size();
        
              obj = peek();
              removeElementAt(len - 1);
        
              return obj;
          }
        
        public synchronized void removeElementAt(int index) {
            if (index >= elementCount) {
                throw new ArrayIndexOutOfBoundsException(index + " >= " +
                                                         elementCount);
        		} else if (index <0) {
                throw new ArrayIndexOutOfBoundsException(index);
        		}
        
            int j = elementCount - index -1;
        
        		if (j >0) {
                System.arraycopy(elementData,index +1,elementData,index,j);
        		}
        
        	  modCount++;
        		elementCount--;
        		elementData[elementCount] = null; /* to let gc do its work */
        }
        ```
        
    - ìê¸° ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ì¼ë°˜ì ìœ¼ë¡œëŠ” ë³€ìˆ˜ë¥¼ ìœ íš¨ ë²”ìœ„ ë°–ìœ¼ë¡œ ë°€ì–´ë‚´ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤.
        
        ```java
        // sample 
        ```
        

## ì‹œìŠ¤í…œì— ì ë³µí•  ìˆ˜ ìˆëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ì˜ ì£¼ë²”ì„ ì•Œì•„ë³´ì.

- ìê¸° ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì—ì„œ ì²˜ë¦¬ê°€ ë¯¸í¡í•œ ê²½ìš°
    - ìœ„ì—ì„œ ë³¸ Stackê³¼ ê°™ì€ ê²½ìš° ì›ì†Œë¥¼ ìœ„í•œ ê³µê°„ì„ ë¯¸ë¦¬ ë§ˆë ¨í•˜ê³  ì¦ê°€ì‹œí‚¤ë©´ì„œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•˜ê³  ìˆëŠ”ë° ì´ëŸ¬í•œ ê²½ìš°ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.
    
    ```java
    // Stackì´ ìƒì†ë°›ê³  ìˆëŠ” java.util.Vector class ì¼ë¶€
    private int newCapacity(int minCapacity) {
        // overflow-conscious code
        int oldCapacity = elementData.length;
        int newCapacity = oldCapacity + ((capacityIncrement > 0) ?
                                         capacityIncrement : oldCapacity);
        if (newCapacity - minCapacity <= 0) {
            if (minCapacity < 0) // overflow
                throw new OutOfMemoryError();
            return minCapacity;
        }
        return (newCapacity - MAX_ARRAY_SIZE <= 0)
            ? newCapacity
            : hugeCapacity(minCapacity);
    }
    ```
    
- ìºì‹œ ê´€ë¦¬ê°€ ì œëŒ€ë¡œ ì•ˆë˜ëŠ” ê²½ìš°
    - ê°ì²´ ì°¸ì¡°ë¥¼ ìºì‹œì— ë„£ê³  ë‹¤ ì“´ í›„ì—ë„ ê·¸ëŒ€ë¡œ ë†”ë‘ëŠ” ê²½ìš° ë©”ëª¨ë¦¬ì— ìŒ“ì—¬ ìˆê²Œ ëœë‹¤.
        - í‚¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ë™ì•ˆë§Œ ìºì‹œ ì—”íŠ¸ë¦¬ê°€ ì‚´ì•„ìˆìœ¼ë©´ ë˜ëŠ” ê²½ìš° WeakHashMap ì„ í†µí•´ ë‹¤ì“´ ì—”íŠ¸ë¦¬ ì œê±°
            
            <aside>
            ğŸ’¡ WeakHashMap 
            : WeakHashMap í´ë˜ìŠ¤ëŠ” Keyì— í•´ë‹¹í•˜ëŠ” ê°ì²´ê°€ ë”ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šì„ ê²½ìš° í•´ë‹¹ ElementëŠ” GCì˜ ëŒ€ìƒì´ ëœë‹¤.
            
            </aside>
            
            ```java
            public static void WeakReferenceTest() throws Exception {
                    
                  WeakHashMap<MainClass, SubClass> map = new WeakHashMap<>();
                  MainClass mainClass = new MainClass();
                  SubClass subClass = new SubClass();
                  map.put(mainClass, subClass);
                  
                  System.out.println(map.size()); // 1 
                  mainClass = null;
                  System.gc();
                  Thread.sleep(2000);
                  System.out.println(map.size()); // 0 -> GC ë™ì‘í•˜ì—¬ ì‚­ì œë¨ 
            
                  HashMap<MainClass, SubClass> map2 = new HashMap<>();
                  MainClass mainClass2 = new MainClass();
                  SubClass subClass2 = new SubClass();
                  map2.put(mainClass2, subClass2);
            
                  System.out.println(map2.size()); // 1 
                  mainClass2 = null;
                  System.gc();
                  Thread.sleep(2000);
                  System.out.println(map2.size()); // 1  
            
            }
            ```
            
        - ë³´í†µì€ ìºì‹œ ìœ íš¨ê¸°ê°„ì„ ì •í™•íˆ ì •ì˜í•˜ê¸°ê°€ ì–´ë µê¸° ë•Œë¬¸ì— ì„œì„œíˆ ìºì‹œ ì—”íŠ¸ë¦¬ì˜ ê°€ì¹˜ë¥¼ ë–¨ì–´ëœ¨ë¦°ë‹¤. ì¦‰ ì“°ì§€ ì•ŠëŠ” ì—”íŠ¸ë¦¬ë¥¼ ì²­ì†Œ í•œë‹¤.
- ë¦¬ìŠ¤ë„ˆì™€ ì½œë°± ê´€ë¦¬ê°€ ì œëŒ€ë¡œ ì•ˆë  ê²½ìš°
    - ì½œë°± ë“±ë¡ í›„ í•´ì§€í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê³„ì† ìŒ“ì—¬ê°. ì½œë°±ì„ ì•½í•œ ì°¸ì¡°(weak reference)ë¡œ ì €ì¥ ì¦‰ WeakHashMapì— í‚¤ë¡œ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í•œë‹¤.
        
        ```java
        // example
        ```
        

## í”¼í•´ì•¼ í•˜ëŠ” ìë°”ì˜ ê°ì²´ ì†Œë©¸ì! finalizer, cleaner

- ì™œ ?
- ê·¸ë ‡ë‹¤ë©´ ?

## ìì›ì„ close() í•´ì•¼í•˜ëŠ” ê²½ìš° try-finally ëŒ€ì‹  try-with-resources !

- ì™œ?

> ì˜¤ëœì‹œê°„ ì ë³µí•´ ìˆì„ ìˆ˜ ìˆëŠ” ì ì¬ì ì¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìš”ì†Œë“¤ì„ ì‚´í´ë³´ê³  í•´ê²°í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ í•´ê²°ì±…ë“¤ì„ ì•Œì•„ë‘ì–´ì•¼
>
